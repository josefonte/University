<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa4</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Tarefa4</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Tarefa 4</a></li><li><a href="#g:2">PacDungeon</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o </h1><p>Nesta Tarefa, o objetivo foi fazer com que todos os jogadores reagissem &#224; passagem do tempo e executassem jogadas (definidas na Tarefa 2). </p><h1>Desenvolvimento</h1><p>Neste documento, para al&#233;m das fun&#231;&#245;es da Tarefa 4, est&#227;o tamb&#233;m as fun&#231;&#245;es do MiniGame <strong>PacDungeon</strong> uma vez que este MiniGame usa fun&#231;&#245;es da Tarefa 4 no seu <em>passTime</em>
e a Tarefa 4 passou tamb&#233;m a envolver fun&#231;&#245;es do miniGame para que o jogo funcionasse com todos os seus modos. Desta forma, como se criaria ciclo de <em>imports</em> entre 
a Tarefa 4 e o <strong>PacDungeon</strong>, decidimos juntar o Minigame ao documento da Tarefa.</p><p>A Tarefa 4 foi progamada de forma a que o <em>Player</em> a ser controlado se mova para a dire&#231;&#227;o que consta na sua informa&#231;&#227;o do <em>PalayerState</em> uma casa (caso tenha velocidade de
de uma jogada por itera&#231;&#227;o) e os restantes ajam como predefinido nas Tarefas seguintes (<em>bots</em>).</p><p>Esta Tarefa revelou-se desafiadora pois exigiu de n&#243;s uma maior capacidade para pensar sobre os tempos e velocidades e como usar todas essas vari&#225;veis para
chegar &#224; resolu&#231;&#227;o do problema, no caso, a passagem do tempo. </p><p>O <strong>PacDungeon</strong> foi um dos MiniGames que o grupo planeava e tencionava fazer. O seu objetivo &#233; comer todas as comidas do mapa e salvar o Pacman preso entre <em>Walls</em> num mapa
com outros seis <em>Ghosts</em> presos.
Para aumentar a dificuldade, a cada dez segundos (quatro itera&#231;&#245;es) novos <em>Ghosts</em> s&#227;o libertados, sendo que dentro do &#250;ltimo conjunto de <em>Walls</em> h&#225; uma
comida grande, o que torna imposs&#237;vel acabar o jogo antes de todos os fantasmas serem libertados.</p><p>O grupo concordou que, entre os dois, este era o MiniGame mais completo uma vez que tem o seu pr&#243;prio <em>passTime</em> e um <em>bot</em>.</p><h1>Conclus&#227;o </h1><p>Tanto a Tarefa 4 quanto o MiniGame tiveram os seus aspetos mais complicados mas tivemos sucesso em executar o que tinhamos em mente.</p><p>Esta Tarefa foi sendo atualizada a cada Tarefa posterior conclu&#237;da e este &#233; o resultado final:</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:rmPlayer">rmPlayer</a> :: Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:getPlayerSpeed">getPlayerSpeed</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Double</li><li class="src short"><a href="#v:nPlayPerStep">nPlayPerStep</a> :: Double -&gt; (Int, Int)</li><li class="src short"><a href="#v:cleanedMaze">cleanedMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Bool</li><li class="src short"><a href="#v:backGhostToAlive">backGhostToAlive</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:lostTimeMegaST">lostTimeMegaST</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTimeOnePlayerPID">passTimeOnePlayerPID</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTimeOnePlayerBotGhost">passTimeOnePlayerBotGhost</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:twoPlaysBotPac">twoPlaysBotPac</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTimeOnePlayerBotPac">passTimeOnePlayerBotPac</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTimeAux">passTimeAux</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; [Int] -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTime">passTime</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:playersPacDungeon">playersPacDungeon</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:statePacDungeon">statePacDungeon</a> :: <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:openJail">openJail</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a></li><li class="src short"><a href="#v:botPacFriend">botPacFriend</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:passTimeOnePlayerBot99">passTimeOnePlayerBot99</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:changeMaze">changeMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:rmGhostsState">rmGhostsState</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:passTimePacDungeon">passTimePacDungeon</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Tarefa 4</h1></a><div class="top"><p class="src"><a id="v:rmPlayer" class="def">rmPlayer</a> :: Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:rmPlayer" class="selflink">#</a></p><div class="doc"><p>Dado um ID, remove um <em>Player</em> de uma lista de <em>Players</em>.</p></div></div><div class="top"><p class="src"><a id="v:getPlayerSpeed" class="def">getPlayerSpeed</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Double <a href="#v:getPlayerSpeed" class="selflink">#</a></p><div class="doc"><p>Obt&#233;m o valor correspondente &#224; velocidade do <em>Player</em>.</p></div></div><div class="top"><p class="src"><a id="v:nPlayPerStep" class="def">nPlayPerStep</a> :: Double -&gt; (Int, Int) <a href="#v:nPlayPerStep" class="selflink">#</a></p><div class="doc"><p>A partir de um <em>Double</em> que representa a velocidade de um <em>Player</em>, produz um par de <em>Int</em> que determinam o n&#250;mero de jogadas que esse <em>Player</em> 
 far&#225; em cada itera&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:cleanedMaze" class="def">cleanedMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Bool <a href="#v:cleanedMaze" class="selflink">#</a></p><div class="doc"><p>Testa se n&#227;o existe qualquer tipo de comida no <em>Maze</em>.</p></div></div><div class="top"><p class="src"><a id="v:backGhostToAlive" class="def">backGhostToAlive</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:backGhostToAlive" class="selflink">#</a></p><div class="doc"><p>Faz com que todos os <em>Ghosts</em> fiquem em modo <em>Alive</em> e com velocidade de 1.</p></div></div><div class="top"><p class="src"><a id="v:lostTimeMegaST" class="def">lostTimeMegaST</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:lostTimeMegaST" class="selflink">#</a></p><div class="doc"><p>Regula todo o sistema de tempo do <em>Mega</em> e modos dos <em>Players</em> em fun&#231;&#227;o disso. Se um Pacman est&#225; em modo <em>Mega</em>, faz com que o mesmo
 perca 250 unidades (ms) a cada itera&#231;&#227;o e quando n&#227;o existem Pacmans no modo Mega, todos os <em>Ghosts</em> passam para o modo <em>Alive</em>.                         </p></div></div><div class="top"><p class="src"><a id="v:passTimeOnePlayerPID" class="def">passTimeOnePlayerPID</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeOnePlayerPID" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar do <strong>passTime</strong> que aplica a fun&#231;&#227;o <strong>play</strong> (Tarefa 2) ao <em>Player</em> que o utilizador est&#225; a controlar.</p></div></div><div class="top"><p class="src"><a id="v:passTimeOnePlayerBotGhost" class="def">passTimeOnePlayerBotGhost</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeOnePlayerBotGhost" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar do <strong>passTime</strong> que produz os movimentos dos <em>Ghosts</em>. Esta fun&#231;&#227;o recorre &#224; fun&#231;&#227;o <strong>ghostPlayOnePlayer</strong> da Tarefa 5.</p></div></div><div class="top"><p class="src"><a id="v:twoPlaysBotPac" class="def">twoPlaysBotPac</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:twoPlaysBotPac" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o determina as duas jogadas consecutivas do Pacman quando este se comporta como <em>bot</em> e, em algumas itera&#231;&#245;es faz duas jogadas seguidas (quando 
 se encontra no modo <em>Mega</em>).                                           </p></div></div><div class="top"><p class="src"><a id="v:passTimeOnePlayerBotPac" class="def">passTimeOnePlayerBotPac</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeOnePlayerBotPac" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar do <strong>passTime</strong> que usa a fun&#231;&#227;o <strong>botMaybeToPlay</strong> da Tarefa 6 e a fun&#231;&#227;o <strong>twoPlaysBotPac</strong> para movimentar o <em>bot</em> Pacman.</p></div></div><div class="top"><p class="src"><a id="v:passTimeAux" class="def">passTimeAux</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; [Int] -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeAux" class="selflink">#</a></p><div class="doc"><p>Calcula, em fun&#231;&#227;o do PID e tipo de <em>Player</em> (<em>Ghost</em> ou Pacman), as a&#231;&#245;es de cada <em>Player</em> numa determindada itera&#231;&#227;o. </p></div></div><div class="top"><p class="src"><a id="v:passTime" class="def">passTime</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTime" class="selflink">#</a></p><div class="doc"><p>Recebe a fun&#231;&#227;o anterior para completar, desta forma, a Tarefa 4 e ainda &#233; utilizada uma condi&#231;&#227;o para poder usar o <strong>passTime</strong> no MiniGame <strong>PacDungeon</strong>, uma vez
 que a interface do jogo completo podia apenas ter um tipo de <strong>passTime</strong>. </p></div></div><a href="#g:2" id="g:2"><h1>PacDungeon</h1></a><div class="top"><p class="src"><a id="v:playersPacDungeon" class="def">playersPacDungeon</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:playersPacDungeon" class="selflink">#</a></p><div class="doc"><p>Lista de <em>Players</em> que o <em>State</em> do jogo cont&#233;m.</p></div></div><div class="top"><p class="src"><a id="v:statePacDungeon" class="def">statePacDungeon</a> :: <a href="Types.html#t:State" title="Types">State</a> <a href="#v:statePacDungeon" class="selflink">#</a></p><div class="doc"><p><em>State</em> do jogo com o <em>Maze</em> desenhado para o mesmo e a lista de <em>Players</em> anterior (e n&#237;vel igual a 0).</p></div></div><div class="top"><p class="src"><a id="v:openJail" class="def">openJail</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> <a href="#v:openJail" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o utilizada para remover simultaneamente todas as <em>Walls</em> que prender os <em>Players</em> dentro de um determinado bloco.</p></div></div><div class="top"><p class="src"><a id="v:botPacFriend" class="def">botPacFriend</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:botPacFriend" class="selflink">#</a></p><div class="doc"><p><em>Bot</em> desenvolvido para quest&#245;es de interface e eventos ap&#243;s o final do MiniGame.</p></div></div><div class="top"><p class="src"><a id="v:passTimeOnePlayerBot99" class="def">passTimeOnePlayerBot99</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeOnePlayerBot99" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o torna poss&#237;vel a movimenta&#231;&#227;o do <em>bot</em> anteriormente referido.</p></div></div><div class="top"><p class="src"><a id="v:changeMaze" class="def">changeMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:changeMaze" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o utilizada para trocar o mapa de um <em>State</em> e usada em conjunto com a fun&#231;&#227;o <strong>openJail</strong>.</p></div></div><div class="top"><p class="src"><a id="v:rmGhostsState" class="def">rmGhostsState</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:rmGhostsState" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que remove os <em>Ghosts</em> de um <em>State</em>.</p></div></div><div class="top"><p class="src"><a id="v:passTimePacDungeon" class="def">passTimePacDungeon</a> :: Int -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimePacDungeon" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o &#233; o que permite todo o MiniGame acontecer com todas as suas restri&#231;&#245;es espec&#237;ficas e consta na fun&#231;&#227;o <strong>passTime</strong> para ser usada 
 no jogo. </p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>