<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa5</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa5</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o </h1><p>O objetivo desta tarefa foi fazer com os <em>Ghosts</em> se movimentassem pelo <em>Maze</em> de forma independente do utilizador e que perseguissem o(s) Pacman(s). </p><h1>Desenvolvimento </h1><p>Para implementar este <em>bot</em> usamos quatro maneiras distintas para o <em>Ghost</em> agir: </p><ul><li>Chase Mode: sempre que o fantasma est&#225; em modo Alive e a mais de quatro pe&#231;as de dist&#226;ncia de todos os Pacmans, este decide a jogada que deve 
   executar quando &#224; sua fente (seguinto a sua orienta&#231;&#227;o) se encontra uma <em>Wall</em>. Para isto, calcula a dist&#226;ncia entre todas as op&#231;&#245;es aos Pacmans
   pela m&#233;trica de Manhattan, sendo que s&#243; reccore &#224; orienta&#231;&#227;o oposta se n&#227;o houver qualquer outra op&#231;&#227;o.</li><li>Chase Mode &quot;four or less&quot;: Ao contr&#225;rio do anterior, este modo &#233; aplicado a cada instante do jogo quando o <em>Ghost</em> est&#225;
   pr&#243;ximo de um Pacman. A sua funcionalidade &#233; aumentar a efic&#225;cia do <em>Ghost</em> e impedir situa&#231;&#245;es em que o <em>Ghost</em> se movia 
   pr&#243;ximo ao Pacman e n&#227;o ia ao encontro do mesmo.</li><li>Scatter Mode: Este modo de agir, invocado quando o <em>Ghost</em> passa para modo <em>Dead</em>, faz com que o mesmo, ao encontrar uma <em>Wall</em>, se mova para a 
   sua direita (relativa &#224; orienta&#231;&#227;o). Em alternativa, se a direita n&#227;o constituir uma op&#231;&#227;o, o <em>Ghost</em> pode virar-se para a esquerda relativa
   e, em &#250;ltimo caso, para tr&#225;s. O <em>bot</em>, quando se encontra em Scatter Mode, tende a rodear objetos no sentido hor&#225;rio, sendo este o efeito objetivo
   deste modo.</li><li>Leave Home: Para evitar que os <em>Ghosts</em> fiquem dentro casa no in&#237;cio e decorrer do jogo, foi criado o modo Leave Home que faz com que eles se retirem
   da casa caso nao haja um <em>Ghost</em> com maior ID dentro da mesma. Esta &#250;ltima condi&#231;&#227;o faz com que saia um de cada vez e evita, na maior parte da vezes,
   que dois <em>Ghosts</em> fiquem na mesma coordenada.    </li></ul><h1>Conclus&#227;o </h1><p>Esta Tarefa exigiu bastantes testes para perceber qual seria a melhor forma de cada <em>Ghost</em> agir consoante as diversas situa&#231;&#245;es em que se encontrava. 
Ap&#243;s resolver todos os pequenos problemas que foram surgindo no decorrer do desenvolvimento desta <em>bot</em>, pensamos ter atingido aquilo
que esperavamos.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:neighborhoodCoords">neighborhoodCoords</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:neighborhoodPieces">neighborhoodPieces</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Piece" title="Types">Piece</a>]</li><li class="src short"><a href="#v:rmWalls">rmWalls</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Piece" title="Types">Piece</a>)] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Piece" title="Types">Piece</a>)]</li><li class="src short"><a href="#v:choices">choices</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:dist">dist</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Int</li><li class="src short"><a href="#v:pacmansCoords">pacmansCoords</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:allOptions">allOptions</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Coords" title="Types">Coords</a>)]</li><li class="src short"><a href="#v:smallerDist">smallerDist</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:chaseMode">chaseMode</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:chaseMode4orless">chaseMode4orless</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:coordback">coordback</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:rights">rights</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:lefts">lefts</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:relativeOr">relativeOr</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:scatterMode">scatterMode</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:homeCoords">homeCoords</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:insideHome">insideHome</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool</li><li class="src short"><a href="#v:ghoMaiorID">ghoMaiorID</a> :: Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:leaveHome">leaveHome</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:minDist">minDist</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; Int</li><li class="src short"><a href="#v:ghostPlayOnePlayer">ghostPlayOnePlayer</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:ghostPlayOnePlayerAnyMaps">ghostPlayOnePlayerAnyMaps</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:ghostPlay">ghostPlay</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; [<a href="Types.html#t:Play" title="Types">Play</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:neighborhoodCoords" class="def">neighborhoodCoords</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:neighborhoodCoords" class="selflink">#</a></p><div class="doc"><p>Calcula todas as coordenadas vizinhas de uma determinada coordenada, isto &#233;, as coordenadas que est&#227;o acima, abaixo, &#224; direita e &#224; esquerda dessa coordenada.</p></div></div><div class="top"><p class="src"><a id="v:neighborhoodPieces" class="def">neighborhoodPieces</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Piece" title="Types">Piece</a>] <a href="#v:neighborhoodPieces" class="selflink">#</a></p><div class="doc"><p>Dada uma coordenada, revela as pe&#231;as que se encontram na sua vizinhan&#231;a.</p></div></div><div class="top"><p class="src"><a id="v:rmWalls" class="def">rmWalls</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Piece" title="Types">Piece</a>)] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Piece" title="Types">Piece</a>)] <a href="#v:rmWalls" class="selflink">#</a></p><div class="doc"><p>Dada uma lista de tuplos (<em>Coords</em>,<em>Piece</em>), remove os tuplos cuja segunda componente seja uma <em>Wall</em>.</p></div></div><div class="top"><p class="src"><a id="v:choices" class="def">choices</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:choices" class="selflink">#</a></p><div class="doc"><p>Usa todas as fun&#231;&#245;es anteriores como auxiliares e, a partir de uma coordenada e um <em>Maze</em>, calcula a lista de coordenadas para o qual o <em>Player</em>
 se pode movimentar.</p></div></div><div class="top"><p class="src"><a id="v:dist" class="def">dist</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Int <a href="#v:dist" class="selflink">#</a></p><div class="doc"><p>Calcula dist&#226;ncias entre coordenadas segundo a m&#233;trica de Manhattan.</p></div></div><div class="top"><p class="src"><a id="v:pacmansCoords" class="def">pacmansCoords</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:pacmansCoords" class="selflink">#</a></p><div class="doc"><p>Extrai as coordenadas dos Pacmans num determinado instante.</p></div></div><div class="top"><p class="src"><a id="v:allOptions" class="def">allOptions</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Coords" title="Types">Coords</a>)] <a href="#v:allOptions" class="selflink">#</a></p><div class="doc"><p>A partir das coordenadas poss&#237;veis do <em>bot</em> e das coordenadas dos advers&#225;rios, calcula a lista de possibilidades como tuplos constituidos
 por uma determinada op&#231;&#227;o do <em>bot</em> e a coordenada de um advers&#225;rio.</p></div></div><div class="top"><p class="src"><a id="v:smallerDist" class="def">smallerDist</a> :: [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:smallerDist" class="selflink">#</a></p><div class="doc"><p>Recebe dois conjuntos de <em>Coords</em> como input (que representam as op&#231;&#245;es do <em>bot</em> e as coordenadas
 dos advers&#225;rios) e seleciona a op&#231;&#227;o do <em>bot</em> que lhe permite ficar mais pr&#243;ximo ao advers&#225;rio.</p></div></div><div class="top"><p class="src"><a id="v:chaseMode" class="def">chaseMode</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:chaseMode" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o testa se a coordenada seguinte do <em>bot</em> (considerando a sua orienta&#231;&#227;o) tem uma <em>Wall</em> ou pertence 
 ao conjunto de coordenadas da abertura da casa. Em caso afirmativo, move-se para outra dire&#231;&#227;o de forma a ficar mais pr&#243;ximo ao advers&#225;rio (usando a <strong>smallerDist</strong> como auxiliar).
 Caso n&#227;o se verifique essa condi&#231;&#227;o, continua a mover-se de acordo com a sua orienta&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:chaseMode4orless" class="def">chaseMode4orless</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:chaseMode4orless" class="selflink">#</a></p><div class="doc"><p>A estruta desta fun&#231;&#227;o &#233; semelhante &#224; anterior, por&#233;m, n&#227;o existem restri&#231;&#245;es quando &#224; informa&#231;&#227;o pr&#243;xima <em>Piece</em>. Como tal, o <em>Ghost</em>
 fica mais eficiente quando estiver pr&#243;ximo do seu alvo. </p></div></div><div class="top"><p class="src"><a id="v:coordback" class="def">coordback</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:coordback" class="selflink">#</a></p><div class="doc"><p>Calcula a coordenada atr&#225;s do <em>Player</em> relativamente &#224; sua orienta&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:rights" class="def">rights</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:rights" class="selflink">#</a></p><div class="doc"><p>Calcula a direita relativa do <em>Player</em>.</p></div></div><div class="top"><p class="src"><a id="v:lefts" class="def">lefts</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:lefts" class="selflink">#</a></p><div class="doc"><p>Calcula a esquerda relativa do /Player.</p></div></div><div class="top"><p class="src"><a id="v:relativeOr" class="def">relativeOr</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:relativeOr" class="selflink">#</a></p><div class="doc"><p>Compila as fun&#231;&#245;es anteriores e a fun&#231;&#227;o <strong>downs</strong> (Tarefa 2) para calcular a orienta&#231;&#227;o relativa de um <em>Player</em>, dada uma orienta&#231;&#227;o (orienta&#231;&#227;o relativa que
 queremos determinar) e um <em>Player</em>.</p></div></div><div class="top"><p class="src"><a id="v:scatterMode" class="def">scatterMode</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:scatterMode" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o cria um modo de se movimentar de forma a que, cada vez que o <em>bot</em> se depare com uma parede, se mova para a direita (caso esta n&#227;o contenha 
 tamb&#233;m uma parede, nesse caso, escolher&#225; a esquerda relativa ou voltar para tr&#225;s, por esta ordem).</p></div></div><div class="top"><p class="src"><a id="v:homeCoords" class="def">homeCoords</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:homeCoords" class="selflink">#</a></p><div class="doc"><p>Dado um <em>Maze</em>, calcula a lista de coordenadas que constituem a casa dos fantasmas e a sua abertura.</p></div></div><div class="top"><p class="src"><a id="v:insideHome" class="def">insideHome</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool <a href="#v:insideHome" class="selflink">#</a></p><div class="doc"><p>Recebe um <em>Maze</em> e uma lista de <em>Players</em> e testa se algum deles est&#225; dentro da casa dos fantasmas.</p></div></div><div class="top"><p class="src"><a id="v:ghoMaiorID" class="def">ghoMaiorID</a> :: Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:ghoMaiorID" class="selflink">#</a></p><div class="doc"><p>A partir de um <em>Int</em> (que representa um ID) e uma lista de <em>Players</em>, devolve uma lista com todos os <em>Players</em> que t&#234;m ID superior ao 
 valor fornecido como primeiro argumento. No caso de n&#227;o existirem <em>Players</em> com essa condi&#231;&#227;o, devolve a lista vazia. </p></div></div><div class="top"><p class="src"><a id="v:leaveHome" class="def">leaveHome</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:leaveHome" class="selflink">#</a></p><div class="doc"><p>Recebe um <em>State</em> e um valor <em>Int</em> e testa se existe <em>Ghost</em> com ID maior do que o valor so segundo argumento.
 No caso de n&#227;o se verificar a condi&#231;&#227;o, o <em>bot</em> que tem como ID o segundo argumento move-se de forma a sair da casa dos fantasmas.
 Pelo contr&#225;rio, se a condi&#231;&#227;o se verificar, o <em>bot</em> em quest&#227;o relaliza apenas a <em>Play</em> &quot;Move id Null&quot; (sendo &quot;id&quot;, o ID do <em>bot</em>), n&#227;o se movendo.</p></div></div><div class="top"><p class="src"><a id="v:minDist" class="def">minDist</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; Int <a href="#v:minDist" class="selflink">#</a></p><div class="doc"><p>Calcula a dist&#226;ncia entre o <em>bot</em> e o advers&#225;rio mais pr&#243;ximo dele.</p></div></div><div class="top"><p class="src"><a id="v:ghostPlayOnePlayer" class="def">ghostPlayOnePlayer</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:ghostPlayOnePlayer" class="selflink">#</a></p><div class="doc"><p>Dado um <em>State</em> e um <em>Int</em> calcula a <em>Play</em> que o <em>bot</em> cujo ID coincide com o segundo argumento deve realizar, tendo em conta todos os modos 
 de se comportar acima descritos.</p></div></div><div class="top"><p class="src"><a id="v:ghostPlayOnePlayerAnyMaps" class="def">ghostPlayOnePlayerAnyMaps</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:ghostPlayOnePlayerAnyMaps" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o tem a mesma estrura da fun&#231;&#227;o <strong>ghostPlayOnePlayer</strong>, por&#233;m, n&#227;o usa usa o modo &quot;Leave Home&quot; para que o <em>bot</em> se possa comportar em <em>Mazes</em>
 que n&#227;o t&#234;m a mesma estruta que os <em>Mazes</em> da Tarefa 1.  </p></div></div><div class="top"><p class="src"><a id="v:ghostPlay" class="def">ghostPlay</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; [<a href="Types.html#t:Play" title="Types">Play</a>] <a href="#v:ghostPlay" class="selflink">#</a></p><div class="doc"><p>Esta &#233; a fun&#231;&#227;o objetivo da Tarefa 5 e calcula a lista de <em>Plays</em> de todos os <em>Ghosts</em> num determinado <em>State</em>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>